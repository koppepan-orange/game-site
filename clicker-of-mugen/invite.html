<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #result{
            font-size: 30px;
            white-space: normal;
            overflow-wrap: break-word; 
            word-wrap: break-word;
            width: 150px
        }
    </style>
</head>
<body>
    <button onclick="Gacha(1)">1回招待する</button>　<button onclick="Gacha(10)">10回招待する</button>
    <div id="result"></div>
    <div id="log"></div>
    <script>
        let Result = document.getElementById("result");
        let log = document.getElementById("log");
        let result = [];
        let per1 = 0.80, per2 = 0.17, per3 = 0.03;

        let Charas = {
            '飛花レイル':{
                name:'飛花レイル',
                invated:0,

                invatedserif:'どーもこーん！！飛花レイルです！！！<br>そいえば、憚羅って人見かけませんでした？',

                N:{
                    name:'',
                    serif:'ちょ、任せとき？',
                    process:async function(cam,me){
                        let target = await LetsTargetSelect();
                        
                    }
                }
            }
        }

        function Gacha(num){
            log.textContent = "";
            Result.innerHTML = "";
            result = [];
            for(i = 0; i < num; i++){
                let rarity = Math.random();
                if(rarity < per1){
                    result.push(1)
                }else if(rarity < (1-per3)){
                    result.push(2)
                }else{
                    result.push(3)
                }
            }
            if(num == 10 && !result.includes(2)){
                result.pop();
                result.push(2)
                log.textContent = '最低保証が働きました！'
            }
            Result.innerHTML = result.join(" ");
        }

    </script>
</body>
</html>