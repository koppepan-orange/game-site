javascript:document.querySelector('html').remove();document.write(`<html><head><title>え？学校でゲームができるって？</title><style>/* #region スターターパック */html{margin: -8px;overflow: hidden;user-select:none;}body{width: 100vw;height: 100vh;margin: 0;white-space: nowrap;touch-action: none;}.row{display: flex;flex-direction: row;}.column{display: flex;flex-direction: column;}.hidden{opacity: 0;pointer-events: none;}img{-webkit-user-drag: none;}::-webkit-scrollbar{display: none;}:focus{outline: none;}/* #region nicotext */.nicotext{position: fixed;top: 0;right: 0;background-color: #f0f8ff80;color: #000000;font-size: 20px;transition: right 2.0s linear;white-space: nowrap;pointer-events: none;}/* #endregion *//* #region tobitext */.tobitext{opacity: 1;padding: 4px 8px;background: rgba(0,0,0,0.72);border-radius: 8px;transform: translate(-50%, -50%) translateY(0px);white-space: nowrap;color: #ffffff;position: absolute;transition: none;z-index: 2147483647;pointer-events: none;}/* #endregion *//* #region logとtext */#log{display: flex;flex-direction: row;justify-content: flex-start;width: 320px;height: 24vh;border: 2px solid #ffffff;border-left: none;position: fixed;left: -334px;color: #fefefe;overflow-y: hidden;transition: left 1.0s ease;z-index: 10;}#log.tog{left: 54px;}#log .opener{width: 30px;height: 100%;background-color: #000000ef;text-align: center;cursor: pointer;z-index: inherit;}#log .log{width: 300px;height: 100%;max-height: 100%;overflow-x: hidden; overflow-y: scroll;background-color: #000000de;text-align: left;font-size: 14px;transition: right 0.3s;z-index: inherit;}#text{display: none;background: rgba(0, 0, 0, 0.8);color: #ffffff;padding: 10px 15px;border-radius: 5px;font-size: 1.2em;position: fixed;bottom: 120px;left: 50%;transform: translateX(-50%);z-index: 10000;white-space: nowrap;overflow: hidden;width: fit-content; /* 文字の長さに応じた幅 */animation: fadeIn 0.5s ease forwards;}@keyframes fadeIn {0%{opacity: 0;}100%{opacity: 1;}}/* #endregion *//* #region description */#mobileDesc{display: none;position: fixed;pointer-events: none;background-color: #363636e2;color: #f0f8ff;text-align: left;padding: 5px 10px;border-radius: 5px;z-index: 256;}#mobileDesc.show{display: block;}/* #endregion *//* #region tk */.tk{position: fixed;}.tk.mostop{z-index: 2147483647;}.tk.cenXY{left: 50% !important;top: 50% !important;transform: translate(-50%, -50%) !important;}.tk.cenX{left: 50% !important;transform: translateX(-50%) !important;}.tk.cenY{top: 50% !important;transform: translateY(-50%) !important;}/* #endregion *//* #region alertD */.alertD{display: block;width: 320px;height: 70px;border-radius: 15px;box-shadow: #000000 5px 5px 20px;position: fixed;bottom: -100px;left: 50%;transform: translateX(-50%);transition: bottom 0.1s linear;will-change: bottom;overflow: hidden;box-sizing: border-box;z-index: 2147483647;}.alertD.show{bottom: 20px;}.alertD .row{display: flex;flex-direction: row;justify-content: flex-start;align-items: center;gap: 5px;width: 100%;height: 100%;padding: 10px;box-sizing: border-box;}.alertD .row .icon{display: flex;justify-content: center;align-items: center;width: 40px;aspect-ratio: 1/1;border-radius: 50%;font-size: 20px;}.alertD .row .text{font-size: 18px;}.alertD .x{display: flex;justify-content: center;align-items: center;width: 20px;aspect-ratio: 1/1;border-radius: 50%;background: #00000000;position: absolute;right: 5px;top: 0;font-size: 20px;cursor: pointer;}.alertD .bar{position: absolute;left: 0;bottom: 0;width: 100%;height: 5px;border-radius: 0 0 15px 15px;overflow: hidden;}.alertD .bar .inner{width: 0px;height: 100%;position: absolute;left: 0;bottom: 0;}/* #endregion */水色 #f0f8ff, #eaf5ff, #def0ff, #cfe9ff, #b5dcff紫色 #f8f6ff, #f5f2ff, #f1edff, #ece8ff, #e9e4ff橙色 #fffaf3, #fff7eb, #fff3e2, #fff0d9, #ffeccf緑色 #f6fff2, #eeffe7, #e6ffdc, #ddffd0, #d4ffc3#template{/* 順番だけ */margin-top: 5px;margin-left: 5px;display: flex;flex-direction: column;justify-content: center;align-items: center;gap: 5px;width: 100px;height: 100px;/* aspect-ratio: 1/1; */padding: 5px;background-color: #f0f8ff;border: 1px solid #000000;color: #000000;font-size: 12px;position: fixed;top: 0;left: 0;animation: fadeIn 0.5s ease forwards;z-index: 999;margin-right: 5px;margin-bottom: 5px;}/* #endregion */#main{display: block;width: 100vw;height: 100vh;position: fixed;left: 0;top: 0;background-color: #f0f8ff;z-index: 0;}#main .text{display: block;width: fit-content;position: absolute;top: 10px;left: 50%;transform: translateX(-50%);text-align: left;font-size: 16px;cursor: pointer;box-sizing: border-box;}#main .text .bt{aspect-ratio: 1/1;border-radius: 5px;scale: 1.0;}#main .text .bt:hover{scale: 1.1;}#main .text .bt:active{scale: 0.9;}#main .text .bt.ose{margin-left: 5px;display: block;width: 23px;background: #a1ffa1;border: 2px solid #9ce497;}#main .text .column{gap: 10px;}#main .text .column .row{justify-content: space-between;align-items: center;gap: 5px;height: 20px;}#main .text .column .row span{flex: 1;}#main .text .column .row .bt{height: 100%;background: #b5dcff;border: 2px solid #a3c3e1;}</style></head><body><div id="mobileDesc"></div><div id="log"><div class="opener"><</div><div class="log"></div></div><div id="text"></div><div id="main"><div class="text">やっほ〜！<br>今どうなってる感じ？<br><div class="row">はいこれ押して→<div class="bt ose"></div></div><br><div class="column inp"></div></div></div><script defer>//#region komagomefunction delay(ms){return new Promise(resolve=>setTimeout(resolve,ms));};async function nicoText(mes){let newDiv = document.createElement('div');newDiv.textContent = mes;newDiv.className = 'nicotext';newDiv.style.top = `calc(${random(0, 100)}vh - 20px)`;newDiv.style.right = '0px';document.querySelector('body').appendChild(newDiv);requestAnimationFrame(() => {newDiv.style.right = `${window.innerWidth + newDiv.offsetWidth}px`; //なんか電車の問題解いてるみたいだね});await delay(2000);newDiv.remove();};function tobiText(youso, mes) {let el = youso;if(typeof el == 'string') el = document.querySelector(youso);if(!el) return console.error('せんぱ〜い？この要素壊れてますよ〜〜？');let rect = el.getBoundingClientRect();let left = rect.left + window.scrollX + rect.width / 2;let top = rect.top + window.scrollY + rect.height / 2;let node = document.createElement('div');node.className = 'tobitext';node.textContent = mes;node.style.top = `${top}px`;node.style.left = `${left}px`;document.body.appendChild(node);let duration = 1200;let distance = -48;let jitter = (Math.random() - 0.5) * 10;let start = performance.now();let easeOutCubic = (t) => {return 1 - Math.pow(1 - t, 3)};function frame(now){let t = Math.min(1, (now - start) / duration);let e = easeOutCubic(t);let tsY = distance * e;let tsX = jitter * (1 - e);node.style.transform = `translate(-50%, -50%) translateY(${tsY}px) translateX(${tsX}px)`;node.style.opacity = String(1 - t);if(t < 1) requestAnimationFrame(frame);else node.remove();};requestAnimationFrame(frame);};function kaijou(num){if(num == 0) return 0;if(num == 1) return 1;return num * kaijou(num - 1);};function kaikyu(sta, end, row, val){if(typeof sta != 'number' || typeof end != 'number' || typeof row != 'number' || typeof val != 'number') return console.error('えっと、できれば..引数は全て数字にして欲しい...です......');if(row <= 0) return console.error(`row${row}でしたけど...大丈夫ですか？`);if(sta > end) return console.error('え、えっと...多分、逆です......');if(val < sta || val > end) return console.error('こ、この値..枠から外れてます....');let kari = Math.floor((val-sta) / row);let sta2 = sta + kari*row;let end2 = sta + row-1;if(end2 > end) end2 = end;let arr = [];for(let i = sta2; i <= end2; i++) arr.push(i);return arr;};function arraySelect(array){let select = Math.floor(Math.random()*array.length);return array[select];};function arrayShuffle(array) {for(let i = array.length - 1; i > 0; i--) {let i2 = Math.floor(Math.random() * (i + 1));[array[i], array[i2]] = [array[i2], array[i]];};return array;};function arraySize(array){let res = new Set(array).size;return res;};function arrayCount(array){let counts = {};for(let value of array){counts[value] = (counts[value] || 0) + 1;};return counts;};function arrayMult(array){return array.reduce((a, v) => a * v, 1);};function arrayGacha(array, prob){if(array.length != prob.length) throw new Error("長さがあってないっす！先輩、ちゃんとチェックした方がいいっすよ〜？");let total = prob.reduce((sum, p) => sum + p, 0);let random = Math.random() * total;for (let i = 0; i < array.length; i++){if(random < prob[i]) return array[i];random -= prob[i];};};function hask(obj, key){let res = obj.hasOwnProperty(key);res = res ? 1 : 0;return res;};function copy(moto) {if(Array.isArray(moto)){let arr = [];for(let i = 0; i < moto.length; i++){arr.push(copy(moto[i]));}return arr;}else if(moto != null && typeof moto == 'object'){let obj = {};for(let key in moto){if(moto.hasOwnProperty(key)){obj[key] = copy(moto[key]);}};return obj;}else{return moto;};};function probability(num){return Math.random()*100 <= num;//例:num == 20 → randomが20以内ならtrue,elseならfalseを返す};function random(min, max) {let num = Math.floor(Math.random() * (max - min + 1)) + min;return Math.floor(num);};function fl(val, arr = [0, 1]){let res = val == arr[0] ? arr[1] : arr[0];return res;};function anagramSaySay(text, loop = 10, bet = '<br>'){let menjo = 0;let len = text.length;if(len < 4) menjo = 1, console.log('長さが3以下なんで最大6っす');let optout = text.split('');let optcou = arrayCount(optout);let optvals = [];for(a of Object.keys(optcou)){let b = optcou[a];b = kaijou(b);optvals.push(b);};let optmat = arrayMult(optvals);let cal = (kaijou(len) / optmat) - 1;let loopen = loop;// console.log(`総数:${cal} 回数:${loopen}`);if(cal < loopen) menjo = 1;let reses = [];while(loopen > 0){loopen -= 1;let res = arrayShuffle(optout).join('');if(reses.includes(res)){loopen += 1; continue};if(res == text && !menjo){loopen += 1; continue;}if(res == text && menjo && reses.length < cal){loopen += 1; continue}else if(res == text && menjo) res = '[重複エラー]';reses.push(res);};return reses.join(bet);};function anagramCan(mae, ato){if(mae.length != ato.length) return 0;let count = {};for(let ch of mae) count[ch] = (count[ch] || 0) + 1;for(let ch of ato){if(!count[ch]) return 0;count[ch] -= 1;};return 1;};function setLocalStorage(name, value){localStorage.setItem(name, value || "");};function getLocalStorage(name){return localStorage.getItem(name);};async function error(text = 'errrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr'){addtext(text);await delay(2000);// window.open('about:blank', '_self').close();};function hoshoku(color){color = color.replace(/^#/, '');if(color.length != 6) return console.log('カラーコードは6桁、ですよ〜？楽しないでくださいね♪');let r = parseInt(color.slice(0, 2), 16);let g = parseInt(color.slice(2, 4), 16);let b = parseInt(color.slice(4, 6), 16);let compR = (255 - r).toString(16).padStart(2, '0');let compG = (255 - g).toString(16).padStart(2, '0');let compB = (255 - b).toString(16).padStart(2, '0');let ato = `#${compR}${compG}${compB}`;return ato;};function mixshoku(c1, c2, ratio = 0.5){let toRGB = c => {c = c.replace('#', '');if (c.length === 3) c = c.split('').map(x => x + x).join('');let n = parseInt(c, 16);return [n >> 16, (n >> 8) & 255, n & 255];};let [r1, g1, b1] = toRGB(c1);let [r2, g2, b2] = toRGB(c2);let r = Math.round(r1 + (r2 - r1) * ratio);let g = Math.round(g1 + (g2 - g1) * ratio);let b = Math.round(b1 + (b2 - b1) * ratio);let ato = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');return ato;};function ranshoku(){let r = random(0, 255);let g = random(0, 255);let b = random(0, 255);let ato = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');return ato;};//#endregion//#region log&textlet textDiv = document.querySelector('#text');let autoDelay = 1;let skipText = false;let clearText = false;let textShowing = 0;function colorcheck(rawtext) {let text = [];let color = null;let colors = [{name: 'red',sym: '*',col: '#ff4040'},{name: 'pink',sym: '&',col: '#ff80bf'},{name: 'yell',sym: '^',col: '#ffff40'}];for(let i = 0; i < rawtext.length; i++){let sym = false;for(let c of colors){if(rawtext[i] == c.sym && rawtext[i + 1] == c.sym){console.log(`→${rawtext[i]}← 発見！ ${c.name}色です`);color = color ? null : c.col;i++;sym = true;break;}};if(sym) continue;if(color) console.log(color);text.push({char: rawtext[i],color: color});}return text;};let queueAddtext = [];let loopAddtext = 0;async function waitforAddtext(){let len = queueAddtext.length;if(len == 0) loopAddtext = 0;else loopAddtext = 1;if(!loopAddtext) return console.log('loopがないんでしゅーりょー');requestAnimationFrame(waitforAddtext);if(textShowing) return console.log('文字表示されたんでスキップ');let raw = queueAddtext.shift();// console.log(`${raw}を送信します`);// console.log(`残り: (${len - 1})[${queueAddtext}]`);await addtext(raw);};async function addtext(raw){if(!raw) return console.log('「内容が？内容が〜〜？ないよ〜〜〜つってwwww直せ」');if(textShowing){queueAddtext.push(raw);if(!loopAddtext) waitforAddtext();return;};textShowing = 1;text = colorcheck(raw);textDiv.innerHTML = "";textDiv.style.display = "block";let index = 0;clearText = false;return new Promise((resolve) => {async function type(){if(index < text.length){if(skipText){while (index < text.length) {let span = document.createElement("span");span.textContent = text[index].char;if(text[index].color) span.classList.add(`color-${text[index].color}`);textDiv.appendChild(span);index++;}index = text.length;skipText = false;setTimeout(type, 10);}else{let span = document.createElement("span");span.textContent = text[index].char;if(text[index].color) span.classList.add(`color-${text[index].color}`);textDiv.appendChild(span);index++;setTimeout(type, 80); // 次の文字を表示する間隔}}else{addlog(textDiv.innerHTML);let waitTime = autoDelay * 1000;let timeout = new Promise(resolve => setTimeout(resolve, waitTime));let userAction = new Promise(resolve => {function waitToClear(event) {if(event.type === 'click' || event.key === 'z' || event.key === 'Enter'){document.removeEventListener('click', waitToClear);document.removeEventListener('keydown', waitToClear);resolve();}}document.addEventListener('click', waitToClear);document.addEventListener('keydown', waitToClear);});Promise.race([timeout, userAction]).then(() => {textDiv.textContent = "";textDiv.style.display = "none";clearText = true;skipText = falsetextShowing = 0;resolve('end');});}};type();});};document.addEventListener('keydown', (e) => {if(e.key === 'z' || e.key === 'Enter'){skipText = true;}});document.addEventListener('keyup', (e) => {if(e.key === 'z' || e.key === 'Enter'){skipText = false;}});document.addEventListener('click', () => {skipText = true;setTimeout(() => skipText = false, 50); // 一時的にスキップを有効化});let logOOmoto = document.querySelector('#log');let log = document.querySelector('#log .log');let logOpener = document.querySelector('#log .opener');let log_open = (code = NaN) => {jump:{if(!isNaN(code)) break jump;logOOmoto.classList.toggle('tog');logOpener.textContent = logOOmoto.classList.contains('tog') ? '<' : '>';return;};if(code == 1){logOOmoto.classList.add('tog');logOpener.textContent = '<';};if(code == 0){logOOmoto.classList.remove('tog');logOpener.textContent = '>';};};logOpener.addEventListener('click', log_open);function addlog(text){log.innerHTML += text + '<br>';log.scrollTop = log.scrollHeight;};//#endregion//#region descriptionlet mobileDesc = document.getElementById('mobileDesc');document.addEventListener('mousemove', (e) => {mobileDesc.style.left = `${e.clientX + 10}px`;mobileDesc.style.top = `${e.clientY + 10}px`;});document.addEventListener('mouseover', (e) => {let descTarget = e.target.closest('[data-description]');if(descTarget){let desc = descTarget.dataset.description;mobileDesc.innerText = desc;mobileDesc.classList.add('show');}});document.addEventListener('mouseout', (e) => {let descTarget = e.target.closest('[data-description]');if(descTarget){mobileDesc.innerText = '';mobileDesc.classList.remove('show');}});//#endregion//#region draggabledocument.addEventListener('mousedown', e => {// let descTarget = e.target.closest('[data-description]');let div = e.target;if(!div.classList.contains('draggable')) return;offsetX = e.clientX - div.getBoundingClientRect().left;offsetY = e.clientY - div.getBoundingClientRect().top;function onMouseMove(e){div.style.left = `${e.clientX - offsetX}px`;div.style.top = `${e.clientY - offsetY}px`;};function onMouseUp(){document.removeEventListener('mousemove', onMouseMove);document.removeEventListener('mouseup', onMouseUp);};document.addEventListener('mousemove', onMouseMove);document.addEventListener('mouseup', onMouseUp);});//#endregion//#region tkclass tk{letructor(type, x = 'half', y = 'half', w = window.innerWidth/2, h = window.innerWidth/2){let youso = document.createElement(type);youso.className = `tk ${type}`;let yoko = ['x', 'w'];for(let n of yoko){if(typeof eval(n) != 'string' || typeof eval(n) == 'string' && !eval(n).endsWith('%')) continue;let num = eval(n).slice(0, -1);eval(n) = num * window.innerWidth / 100;};let tate = ['y', 'h'];for(let n of tate){if(typeof eval(n) != 'string' || typeof eval(n) == 'string' && !eval(n).endsWith('%')) continue;let num = eval(n).slice(0, -1);eval(n) = num * window.innerHeight / 100;};console.log(x, y, w, h);youso.style.width = `${w}px`;youso.style.height = `${h}px`;youso.style.left = `${x}px`;youso.style.top = `${y}px`;if(x == 'half' && y == 'half') youso.classList.add('cenXY');else if(x == 'half') youso.classList.add('cenX');else if(y == 'half') youso.classList.add('cenY');this.youso = youso;};attrAdd(dict = 'none'){if(dict == 'none') return;if(typeof dict == 'string'){//attr: nankalet [key, val] = dict.split(':');key = key.trim();val = val.trim();this.youso.setAttribute(key, val);return 0;};if(typeof dict != 'object') return 1;for(let key in dict) this.youso.setAttribute(key, dict[key]);return 0;};styleAdd(dict){for(let key in dict) this.youso.style[key] = dict[key];};classAdd(name){this.youso.classList.add(name)};classRem(name){this.youso.classList.remove(name)};classTog(name){this.youso.classList.toggle(name)};classHas(name){let is = this.youso.classList.contains(name);return is;};evAdd(type, func){this.youso.addEventListener(type, func);};yousoAdd(youso){this.youso.appendChild(youso);};append(){document.body.appendChild(this.youso);};remove(){this.youso.remove();};}function tkTest(){let mono = new tk('div', 'half', 'half');mono.classAdd('draggable');mono.styleAdd({background: '#f0f8ff'});let mono2 = new tk('div', 'half', 'half');mono2.styleAdd({background: '#cfe9ff'});mono.yousoAdd(mono2.div);mono.evAdd('click', () => nicoText('clicked'));mono.append();};//#endregion//#region alertDclass alertD{constructor(text, elses = {}){this.text = text;for(let key in elses) this[key] = elses[key];/*back: 背景色barc: barの色time: 消えるまでの時間[s]*/};x(aru){this.x = aru;};appear(){let back = this.back || '#ffffff';let barc = this.barc || '#80ff80';let div = document.createElement('div');div.classList.add('alertD');div.style.background = back;div.style.boxShadow = `${hoshoku(back)} 5px 5px 20px`;let row = document.createElement('div');row.classList.add('row');let icon = document.createElement('div');icon.classList.add('icon');icon.style.background = barc;icon.style.color = back;icon.textContent = '！';row.appendChild(icon);let text = document.createElement('div');text.innerText = this.text;text.style.color = hoshoku(back);row.appendChild(text);div.appendChild(row);let x = document.createElement('div');x.className = 'x';x.innerText = '×';x.style.color = hoshoku(back);x.addEventListener('click', () => div.remove());div.appendChild(x);let bar = document.createElement('div');bar.classList.add('bar');let inner = document.createElement('div');inner.classList.add('inner');inner.style.background = barc;bar.appendChild(inner);div.appendChild(bar);document.body.appendChild(div);this.div = div;setTimeout(() => {div.classList.add('show');}, 100);// pointerが乗ってる間はthis.loopを0にするdiv.addEventListener('pointerenter', () => this.loop = 0);div.addEventListener('pointerleave', () => this.loop = 1);let time = 0;let limit = 500;if(this.time) limit = this.time*100;this.loop = 1;this.interval = setInterval(() => {if(this.loop) time++;inner.style.width = `${time/limit*100}%`;if(time == limit) this.delete();}, 10);};delete(){clearInterval(this.interval);let div = this.div;div.classList.remove('show');setTimeout(() => div.remove(), 1000);};};//#endregion//#region observerlet keys = {};document.addEventListener('keydown', e => {let key = e.key.toLowerCase();if(e.key == ' ') key = 'space';keys[key] = true;});document.addEventListener('keyup', e => {let key = e.key.toLowerCase();if(e.key == ' ') key = 'space';keys[key] = false;});let clicking = false;let cricking = false;document.addEventListener('pointerdown', (e) => {if(e.buttons == 0) clicking = true;if(e.buttons == 2) cricking = true;});document.addEventListener('pointerup', (e) => {if(e.buttons == 0) clicking = false;if(e.buttons == 2) cricking = false;});document.addEventListener('pointercancel', (e) => {if(e.buttons == 0) clicking = false;if(e.buttons == 2) cricking = false;});window.addEventListener('blur', () => {clicking = cricking = false});let mouseX = 0;let mouseY = 0;document.addEventListener('mousemove', (e) => {mouseX = e.clientX;mouseY = e.clientY;});//#endregionlet mainD = document.getElementById('main');let texD = mainD.querySelector('.text');let texC = {inpD: texD.querySelector('.column.inp'),};let texF = {};texC.inpL = [{name:'nicoText',func: (text) => {nicoText(text);}},{name:'alertD',func: (text) => {let al = new alertD(text);al.appear();}},{name:'addtext',func: (text) => {addtext(text);}}];texF.load = () => {for(let inp of texC.inpL){let div = document.createElement('div');div.className = `row`;let span = document.createElement('span');span.innerText = inp.name;div.appendChild(span);let input = document.createElement('input');input.type = "text";input.placeholder = inp.name;div.appendChild(input);let bt = document.createElement('div');bt.className = 'bt';bt.addEventListener('click', () => {let text = input.value.trim(' ');inp.func(text);});div.appendChild(bt);texC.inpD.appendChild(div);}};function start(){texF.load();}document.addEventListener('DOMContentLoaded', start);</script></body></html>`)